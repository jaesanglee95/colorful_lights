## SAS 분석 챔피언십: 롯데 홈쇼핑 실적 예측

### 변수조정 

1) 동국대(대상): 우선 방송정보 변수에서는 기본적인 연도, 월, 일, 요일을 만듦. 이후 방송 시간의 중간을 기점으로 방송 중간시간 파생변수를 만든다. 이 중간시간을 반올림해 중간Hour 변수를 만들었다. ex) 11시 23분이면 11시로 사용 => 드라마 등 **인기방송이 끝날 시점에 시청자들이 채널을 돌리는 시간**(재핑타임)을 책정하기 위한 변수

또한, 휴일이 며칠 지속되냐(하루 혹은 이틀)를 다르게 범주화 한 **공휴일** 변수, 일주일을 168개의 시간으로 쪼개 범주화한 시간 변수, 1주를 통으로 측정하는 주 변수, 인기 상품이 팔리는 **프라임 시간대**를 요일별로 또다시 쪼갠 프라임 범주형 변수들을 도입했다. 프라임 시간대는 월수금을 한 묶음으로, 나머지 요일은 따로 책정했다.

+주말인지 여부의 변수!

<img src="https://byline.network/wp-content/uploads/2019/11/sas-championship-dongkook-team-1.jpg" alt="img" style="zoom: 67%;" /> 

이외에도 판매량이 높은 브랜드가 있어 **브랜드파워** 변수를 만들었고, 방송 길이와 매출액에 연관이 있다고 생각해 그 방송 내에서 몇 개의 제품을 판매하는지를 연속형으로 범주화했다. 이는 방송길이/제품수 변수로, 3600초 방송에서 두개 제품을 팔았으면 변수의 값은 1800이 되고 각각 매출액을 예측했다. 또한, 1년 매출을 예측해야 하므로 특정 상품의 **시즌성 매출**에서 힌트를 얻을 수 있을 것으로 판단해 1년 전 같은 달 같은 시간대에 같은 상품을 팔았을 때의 매출액 평균값을 변수로 사용했다. 

 <img src="https://byline.network/wp-content/uploads/2019/11/sas-championship-dongkook-team-3.jpg" alt="img" style="zoom:67%;" />  

  특정 브랜드 5개의 판매량이 70%를 차지해 브랜드 신뢰성을 확인할 수 있었다. 동국대 팀의 한방이 된 프라임 시간대의 경우, 같은 프라임 시간대에도 요일별로 매출액 분포가 다름을 확인 가능했다. 따라서 프라임 시간과 요일을 가장 중요한 변수로 놓고 모델링을 시작했다고 한다. 이외에 재미있는 요소는 생활물가 지수와 매출액이 반비례한다는 것. 즉, **물가가 높아지면 매출액은 바로 떨어진다**.  

2) 연세대(2위?): 재핑타임을 활용 가능한 데이터, 즉 정수화하기 위해 반올림해서 더미 변수를 생성했다. 그 결과 시간대와 평균매출액간 상관관계를 봤을 때 프라임 시간대가 존재함을 알 수 있었고, 상품 대분류별로 특징이 있음을 알 수 있다. 예를 들어 식품은 저녁 시간대에, 건강 대분류는 장년층 타깃인 아침 시간대 매출이 높았다.

<img src="https://byline.network/wp-content/uploads/2019/11/sas-championship-yonsei-team-1.jpg" alt="img" style="zoom:67%;" /> 

이를 통해 최적의 요일, 시간, 상품 조합이 있는지를 알아내기 위해 연관성 분석을 실행했다. 조건부 확률을 통해 신뢰도를 구하고 요일/시간/상품 조합이 얼마나 빈번한지 파악했는데, 각 조합 평균매출액을 계산해 신뢰도 0.01 이상&매출 평균 이상이면 좋은 조합, 그렇지 않으면 나쁜 조합으로 판별했다.

연세대 팀은 일주일간 기상정보 담은 데이터셋과, 지상파 채널 사이에 위치한 홈쇼핑 채널의 특성을 반영해 직접 영향을 주는 **지상파 Top20 시청률 합**만을 이용했다. 



<img src="C:\Users\dbdms\AppData\Roaming\Typora\typora-user-images\image-20200803094332516.png" alt="image-20200803094332516" style="zoom: 67%;" />  

https://www.upinews.kr/newsView/upi202002200022 롯데홈쇼핑: 코로나 19로 인해 소비패턴 바뀜

롯데, 현대는 인플루언서 마케팅이 공격적이었는데 NS는 그런 데이터를 안주네요... 그래서 낮은게 아닐까?



### 모델링 

1) 동국대: 범주형 변수가 많으므로 선형회귀를 사용하지 않고 그래디언트 부스팅을 사용. 매출액이 매우 높거나 낮은 경우 오차가 컸는데, 오차를 살펴보니 오후 프라임 시간대인 것을 깨닫고 옵션값을 조정해 오버피팅(과적합)을 완화. / 방송 시간대를 4가지로 분류해 모델링을 진행한 결과, 매출에 영향을 미치는 중요 변수가 서로 달랐다. 

동국대 팀은 홈쇼핑에 대한 지식을 잘 쌓아, 이상치 제거 등도 함부로 하지 않고 높은 이유를 굳이 찾아냈다. 분석과 변수, 모델링이 활용방안과 연계된 것이 특징. 예측정확도 역시 뛰어난 편이었고, 짧은 시간동안 여러 변수를 만들고 특히 외부데이터에 많이 접근해 분석 자료로까지 활용했다는 것이 훌륭. 특히 프라임 시간대의 경우 시각화에서 프라임 시간대를 요일별 네 개로 나눠 진행한 점이 대상을 타게 된 이유. 

2) 연세대: 모델링 성능 평가는 2013~2016년 데이터로 2017년을 검증하고, 2013~2017년 데이터로 최종 예측을 진행. 의사결정나무를 벤치마크 모델로 해서 현재 생성한 파생변수가 유의미함을 확인. 파생변수를 누적함에 따라 RMSE(평균 제곱근 오차)가 떨어지는 것을 확인 가능. 최종모델은 그래디언트 부스팅과 랜덤 포레스트, 의사결정나무 중 RMSE가 제일 낮은 그래디언트 부스팅을 사용.

3) 연대 응통 입선팀 PT 자료 https://jlim0316.tistory.com/134



## 시계열 분석

 <img src="C:\Users\dbdms\AppData\Roaming\Typora\typora-user-images\image-20200803102322137.png" alt="image-20200803102322137" style="zoom: 67%;" /> 

ARIMA하기에 데이터가 부족한거 같음. 최소 2년치는 있어야 하는 것 아닌가? 그래도 계절성 있을테니까 시도는 가능할듯....  참고: 페이스북 시계열 예측 라이브러리 Prophet

https://yamalab.tistory.com/112 시계열 분석 간단한 설명



### T-커머스 매출예측 with 딥러닝&통계모델 

http://kiise.or.kr/e_journal/2017/8/JOK/pdf/07.pdf





